basePath: /api/v1
definitions:
  consts.TaskType:
    enum:
    - RestartService
    - RunAlgorithm
    - FaultInjection
    - BuildImages
    - BuildDataset
    - CollectResult
    type: string
    x-enum-varnames:
    - TaskTypeRestartService
    - TaskTypeRunAlgorithm
    - TaskTypeFaultInjection
    - TaskTypeBuildImages
    - TaskTypeBuildDataset
    - TaskTypeCollectResult
  database.FaultInjectionSchedule:
    properties:
      benchmark:
        description: 基准数据库
        type: string
      created_at:
        description: 创建时间
        type: string
      description:
        description: 描述（可选字段）
        type: string
      display_config:
        description: 面向用户的展示配置
        type: string
      end_time:
        description: 预计故障结束时间
        type: string
      engine_config:
        description: 面向系统的运行配置
        type: string
      fault_type:
        description: 故障类型
        type: integer
      id:
        description: 唯一标识
        type: integer
      injection_name:
        description: 在k8s资源里注入的名字
        type: string
      labels:
        allOf:
        - $ref: '#/definitions/database.LabelsMap'
        description: 用户自定义标签，JSONB格式存储 key-value pairs
      pre_duration:
        description: 正常数据时间
        type: integer
      start_time:
        description: 预计故障开始时间
        type: string
      status:
        description: '-1: 已删除 0: 初始状态 1: 注入结束且失败 2: 注入结束且成功 3: 收集数据失败 4:收集数据成功'
        type: integer
      task_id:
        description: 从属什么 taskid
        type: string
      updated_at:
        description: 更新时间
        type: string
    type: object
  database.LabelsMap:
    additionalProperties:
      type: string
    type: object
  dto.AlgorithmExecutionPayload:
    properties:
      algorithm:
        type: string
      dataset:
        type: string
      env_vars:
        type: object
    type: object
  dto.AlgorithmListResp:
    properties:
      algorithms:
        items:
          type: string
        type: array
    type: object
  dto.DatasetBuildPayload:
    properties:
      benchmark:
        type: string
      env_vars:
        type: object
      name:
        type: string
      pre_duration:
        type: integer
    type: object
  dto.DatasetDeleteResp:
    properties:
      failed_names:
        items:
          type: string
        type: array
      success_count:
        type: integer
    type: object
  dto.DatasetItem:
    properties:
      end_time:
        type: string
      name:
        type: string
      param:
        items:
          type: object
        type: array
      start_time:
        type: string
    type: object
  dto.DetectorRecord:
    properties:
      abnormal_avg_duration:
        example: 0.5
        type: number
      abnormal_p90:
        example: 1.2
        type: number
      abnormal_p95:
        example: 1.5
        type: number
      abnormal_p99:
        example: 2
        type: number
      abnormal_succ_rate:
        example: 0.8
        type: number
      issue:
        type: string
      normal_avg_duration:
        example: 0.3
        type: number
      normal_p90:
        example: 0.8
        type: number
      normal_p95:
        example: 1
        type: number
      normal_p99:
        example: 1.3
        type: number
      normal_succ_rate:
        example: 0.95
        type: number
      span_name:
        type: string
    type: object
  dto.ExecutionRecord:
    properties:
      algorithm:
        type: string
      granularity_records:
        items:
          $ref: '#/definitions/dto.GranularityRecord'
        type: array
    type: object
  dto.FaultInjectionNoIssuesResp:
    properties:
      dataset_id:
        type: integer
      display_config:
        type: string
      engine_config:
        $ref: '#/definitions/handler.Node'
      injection_name:
        type: string
      pre_duration:
        type: integer
    type: object
  dto.FaultInjectionStatisticsResp:
    properties:
      no_issues_count:
        type: integer
      total_count:
        type: integer
      with_issues_count:
        type: integer
    type: object
  dto.FaultInjectionWithIssuesResp:
    properties:
      dataset_id:
        type: integer
      display_config:
        type: string
      engine_config:
        $ref: '#/definitions/handler.Node'
      injection_name:
        type: string
      issues:
        type: string
      pre_duration:
        type: integer
    type: object
  dto.GenericResponse-any:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-array_database_FaultInjectionSchedule:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        description: 泛型类型的数据
        items:
          $ref: '#/definitions/database.FaultInjectionSchedule'
        type: array
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-array_dto_FaultInjectionNoIssuesResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        description: 泛型类型的数据
        items:
          $ref: '#/definitions/dto.FaultInjectionNoIssuesResp'
        type: array
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-array_dto_FaultInjectionWithIssuesResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        description: 泛型类型的数据
        items:
          $ref: '#/definitions/dto.FaultInjectionWithIssuesResp'
        type: array
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-database_FaultInjectionSchedule:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/database.FaultInjectionSchedule'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_AlgorithmListResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.AlgorithmListResp'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_DatasetDeleteResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.DatasetDeleteResp'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_FaultInjectionStatisticsResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.FaultInjectionStatisticsResp'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_GetCompletedMapResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.GetCompletedMapResp'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_GroundTruthResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.GroundTruthResp'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_InjectCancelResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.InjectCancelResp'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_InjectionFieldMappingResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.InjectionFieldMappingResp'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_NsResourcesResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.NsResourcesResp'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_PaginationResp-dto_DatasetItem:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.PaginationResp-dto_DatasetItem'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_PaginationResp-dto_TaskItem:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.PaginationResp-dto_TaskItem'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_PaginationResp-dto_UnifiedTask:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.PaginationResp-dto_UnifiedTask'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_QueryDatasetResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.QueryDatasetResp'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_RawDataResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        description: 泛型类型的数据
        items:
          $ref: '#/definitions/dto.RawDataItem'
        type: array
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_SubmitInjectionResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.SubmitInjectionResp'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_SubmitResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.SubmitResp'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_TaskDetailResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.TaskDetailResp'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-handler_Node:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/handler.Node'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-handler_Resources:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/handler.Resources'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GetCompletedMapResp:
    properties:
      has_anomaly:
        description: 检测到异常的链路ID列表
        items:
          type: string
        type: array
      no_anomaly:
        description: 没有异常的链路ID列表
        items:
          type: string
        type: array
    type: object
  dto.GranularityRecord:
    properties:
      confidence:
        type: number
      level:
        type: string
      rank:
        type: integer
      result:
        type: string
    type: object
  dto.GroundTruthReq:
    properties:
      datasets:
        items:
          type: string
        type: array
    required:
    - datasets
    type: object
  dto.GroundTruthResp:
    additionalProperties:
      $ref: '#/definitions/handler.Groundtruth'
    type: object
  dto.InjectCancelResp:
    type: object
  dto.InjectionFieldMappingResp:
    properties:
      fault_resource:
        type: object
      fault_type:
        type: object
      status:
        type: object
    type: object
  dto.LabelItem:
    properties:
      key:
        enum:
        - env
        - batch
        type: string
      value:
        type: string
    required:
    - key
    - value
    type: object
  dto.NsResourcesResp:
    additionalProperties:
      $ref: '#/definitions/handler.Resources'
    type: object
  dto.PaginationResp-dto_DatasetItem:
    properties:
      items:
        items:
          $ref: '#/definitions/dto.DatasetItem'
        type: array
      total:
        type: integer
      total_pages:
        type: integer
    type: object
  dto.PaginationResp-dto_TaskItem:
    properties:
      items:
        items:
          $ref: '#/definitions/dto.TaskItem'
        type: array
      total:
        type: integer
      total_pages:
        type: integer
    type: object
  dto.PaginationResp-dto_UnifiedTask:
    properties:
      items:
        items:
          $ref: '#/definitions/dto.UnifiedTask'
        type: array
      total:
        type: integer
      total_pages:
        type: integer
    type: object
  dto.QueryDatasetResp:
    properties:
      detector_result:
        $ref: '#/definitions/dto.DetectorRecord'
      end_time:
        type: string
      execution_results:
        items:
          $ref: '#/definitions/dto.ExecutionRecord'
        type: array
      name:
        type: string
      param:
        items:
          type: object
        type: array
      start_time:
        type: string
    type: object
  dto.RawDataItem:
    properties:
      algorithm:
        type: string
      dataset:
        type: string
      entries:
        items:
          $ref: '#/definitions/dto.GranularityRecord'
        type: array
      execution_id:
        type: integer
      groundtruth:
        $ref: '#/definitions/handler.Groundtruth'
    type: object
  dto.RawDataReq:
    properties:
      algorithms:
        items:
          type: string
        type: array
      datasets:
        items:
          type: string
        type: array
      execution_ids:
        items:
          type: integer
        type: array
    type: object
  dto.RetryPolicy:
    properties:
      backoff_sec:
        description: Seconds to wait between retries
        type: integer
      max_attempts:
        description: Maximum number of retry attempts
        type: integer
    type: object
  dto.SubmitInjectionReq:
    properties:
      algorithms:
        items:
          type: string
        type: array
      benchmark:
        type: string
      interval:
        minimum: 1
        type: integer
      labels:
        items:
          $ref: '#/definitions/dto.LabelItem'
        type: array
      pre_duration:
        minimum: 1
        type: integer
      specs:
        items:
          $ref: '#/definitions/handler.Node'
        type: array
    required:
    - benchmark
    - interval
    - pre_duration
    - specs
    type: object
  dto.SubmitInjectionResp:
    properties:
      duplicated_count:
        type: integer
      group_id:
        type: string
      original_count:
        type: integer
      traces:
        items:
          $ref: '#/definitions/dto.Trace'
        type: array
    type: object
  dto.SubmitResp:
    properties:
      group_id:
        type: string
      traces:
        items:
          $ref: '#/definitions/dto.Trace'
        type: array
    type: object
  dto.TaskDetailResp:
    properties:
      logs:
        items:
          type: string
        type: array
      task:
        $ref: '#/definitions/dto.TaskItem'
    type: object
  dto.TaskItem:
    properties:
      created_at:
        type: string
      id:
        type: string
      payload:
        type: object
      status:
        type: string
      trace_id:
        type: string
      type:
        type: string
    type: object
  dto.Trace:
    properties:
      head_task_id:
        type: string
      index:
        type: integer
      trace_id:
        type: string
    type: object
  dto.UnifiedTask:
    properties:
      cron_expr:
        description: Cron expression for recurring tasks
        type: string
      execute_time:
        description: Unix timestamp for delayed execution
        type: integer
      group_carrier:
        allOf:
        - $ref: '#/definitions/propagation.MapCarrier'
        description: Carrier for group context
      group_id:
        description: ID for grouping tasks
        type: string
      immediate:
        description: Whether to execute immediately
        type: boolean
      payload:
        description: Task-specific data
        type: object
      restart_num:
        description: Number of restarts for the task
        type: integer
      retry_policy:
        allOf:
        - $ref: '#/definitions/dto.RetryPolicy'
        description: Policy for retrying failed tasks
      task_id:
        description: Unique identifier for the task
        type: string
      trace_carrier:
        allOf:
        - $ref: '#/definitions/propagation.MapCarrier'
        description: Carrier for trace context
      trace_id:
        description: ID for tracing related tasks
        type: string
      type:
        allOf:
        - $ref: '#/definitions/consts.TaskType'
        description: Task type (determines how it's processed)
    type: object
  handler.Groundtruth:
    properties:
      container:
        items:
          type: string
        type: array
      function:
        items:
          type: string
        type: array
      metric:
        items:
          type: string
        type: array
      pod:
        items:
          type: string
        type: array
      service:
        items:
          type: string
        type: array
      span:
        items:
          type: string
        type: array
    type: object
  handler.Node:
    properties:
      children:
        additionalProperties:
          $ref: '#/definitions/handler.Node'
        type: object
      description:
        type: string
      name:
        type: string
      range:
        items:
          type: integer
        type: array
      value:
        type: integer
    type: object
  handler.Pair:
    properties:
      source:
        type: string
      target:
        type: string
    type: object
  handler.Resources:
    properties:
      app_labels:
        items:
          type: string
        type: array
      container_names:
        items:
          type: string
        type: array
      database_app_names:
        items:
          type: string
        type: array
      dns_app_names:
        items:
          type: string
        type: array
      http_app_names:
        items:
          type: string
        type: array
      jvm_app_names:
        items:
          type: string
        type: array
      network_pairs:
        items:
          $ref: '#/definitions/handler.Pair'
        type: array
    type: object
  propagation.MapCarrier:
    additionalProperties:
      type: string
    type: object
host: localhost:8080
info:
  contact:
    email: team@rcabench.com
    name: RCABench Team
  description: |-
    RCABench - A comprehensive root cause analysis benchmarking platform for microservices
    This API provides endpoints for managing datasets, algorithms, evaluations, and fault injections
    for root cause analysis in distributed systems and microservices architectures.
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  title: RCABench API
  version: 1.0.1
paths:
  /api/v1/algorithms:
    get:
      description: 获取算法列表
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_AlgorithmListResp'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取算法列表
      tags:
      - algorithm
    post:
      description: 执行算法
      parameters:
      - description: 请求体
        in: body
        name: body
        required: true
        schema:
          items:
            $ref: '#/definitions/dto.AlgorithmExecutionPayload'
          type: array
      produces:
      - application/json
      responses:
        "202":
          description: Accepted
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_SubmitResp'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 执行算法
      tags:
      - algorithm
  /api/v1/algorithms/build:
    post:
      consumes:
      - multipart/form-data
      description: 通过上传文件或指定算法名称来构建算法镜像
      parameters:
      - description: 算法文件 (zip/tar.gz)
        in: formData
        name: file
        type: file
      - description: 算法名称
        in: formData
        name: algo
        type: string
      produces:
      - application/json
      responses:
        "202":
          description: Accepted
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_SubmitResp'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 构建算法镜像
      tags:
      - algorithm
  /api/v1/datasets:
    delete:
      description: 删除数据集数据
      parameters:
      - collectionFormat: csv
        description: 数据集名称列表
        in: query
        items:
          type: string
        name: names
        required: true
        type: array
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_DatasetDeleteResp'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 删除数据集数据
      tags:
      - dataset
    get:
      description: 获取状态为成功的注入数据集列表（支持分页参数）
      parameters:
      - default: 1
        description: 页码（从1开始）
        in: query
        minimum: 1
        name: page_num
        required: true
        type: integer
      - default: 10
        description: 每页数量
        in: query
        maximum: 20
        minimum: 5
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功响应
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_PaginationResp-dto_DatasetItem'
        "400":
          description: 参数校验失败
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 分页查询数据集列表
      tags:
      - dataset
    post:
      description: 批量构建数据集
      parameters:
      - description: 请求体
        in: body
        name: body
        required: true
        schema:
          items:
            $ref: '#/definitions/dto.DatasetBuildPayload'
          type: array
      produces:
      - application/json
      responses:
        "202":
          description: Accepted
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_SubmitResp'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 批量构建数据集
      tags:
      - dataset
  /api/v1/datasets/download:
    get:
      description: 将指定路径的多个数据集打包为 ZIP 文件下载（自动排除 result.csv 文件）
      parameters:
      - collectionFormat: csv
        description: 数据集组ID列表，与names参数二选一
        in: query
        items:
          type: string
        name: group_ids
        type: array
      - collectionFormat: csv
        description: 数据集名称列表，与group_ids参数二选一
        in: query
        items:
          type: string
        name: names
        type: array
      produces:
      - application/zip
      responses:
        "200":
          description: ZIP 文件流
          schema:
            type: string
        "400":
          description: 参数绑定错误
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "403":
          description: 非法路径访问
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: 文件打包失败
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 下载数据集打包文件
      tags:
      - dataset
  /api/v1/datasets/query:
    get:
      description: 根据数据集名称查询单个数据集的详细信息，包括检测器结果和执行记录
      parameters:
      - description: 数据集名称
        in: query
        name: name
        required: true
        type: string
      - description: 排序方式
        in: query
        name: sort
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_QueryDatasetResp'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 查询单个数据集详情
      tags:
      - dataset
  /api/v1/debug/ns/status:
    get:
      description: 获取命名空间锁状态信息
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取命名空间锁状态
      tags:
      - debug
  /api/v1/evaluations/groundtruth:
    post:
      description: 根据数据集数组获取对应的 ground truth 数据，用于算法评估的基准数据。支持批量查询多个数据集的真实标签信息
      parameters:
      - description: Ground truth查询请求，包含数据集列表
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.GroundTruthReq'
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回数据集的ground truth信息
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_GroundTruthResp'
        "400":
          description: 请求参数错误，如JSON格式不正确、数据集数组为空
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取数据集的 ground truth
      tags:
      - evaluation
  /api/v1/evaluations/raw-data:
    post:
      description: 根据算法和数据集的笛卡尔积获取对应的原始评估数据，包括粒度记录和真实值信息。支持批量查询多个算法在多个数据集上的执行结果
      parameters:
      - description: 原始数据查询请求，包含算法列表和数据集列表
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.RawDataReq'
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回原始评估数据列表
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_RawDataResp'
        "400":
          description: 请求参数错误，如JSON格式不正确、算法或数据集数组为空
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取原始评估数据
      tags:
      - evaluation
  /api/v1/injections:
    get:
      description: 支持排序、过滤的故障注入记录查询接口。返回数据库原始记录列表，不进行数据转换。
      parameters:
      - description: 环境标签过滤
        in: query
        name: env
        type: string
      - description: 批次标签过滤
        in: query
        name: batch
        type: string
      - description: 基准测试类型过滤
        enum:
        - clickhouse
        in: query
        name: benchmark
        type: string
      - default: 0
        description: 状态过滤，具体值参考字段映射接口(/mapping)
        in: query
        name: status
        type: integer
      - default: 0
        description: 故障类型过滤，具体值参考字段映射接口(/mapping)
        in: query
        name: fault_type
        type: integer
      - default: desc
        description: 排序方式，默认desc。按created_at字段排序
        enum:
        - asc
        - desc
        in: query
        name: sort
        type: string
      - description: 结果数量限制，用于控制返回记录数量
        in: query
        minimum: 1
        name: limit
        type: integer
      - description: 时间范围查询，支持自定义相对时间(1h/24h/7d)或custom 默认不设置
        in: query
        name: lookback
        type: string
      - description: 自定义开始时间，RFC3339格式，当lookback=custom时必需
        format: date-time
        in: query
        name: custom_start_time
        type: string
      - description: 自定义结束时间，RFC3339格式，当lookback=custom时必需
        format: date-time
        in: query
        name: custom_end_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回故障注入记录列表
          schema:
            $ref: '#/definitions/dto.GenericResponse-array_database_FaultInjectionSchedule'
        "400":
          description: 请求参数错误，如参数格式不正确、验证失败等
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取故障注入记录列表
      tags:
      - injection
    post:
      description: 提交故障注入任务，支持批量提交多个故障配置，系统会自动去重并返回提交结果
      parameters:
      - description: 故障注入请求体
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.SubmitInjectionReq'
      produces:
      - application/json
      responses:
        "202":
          description: 成功提交故障注入任务
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_SubmitInjectionResp'
        "400":
          description: 请求参数错误，如JSON格式不正确、参数验证失败或算法无效等
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 提交故障注入任务
      tags:
      - injection
  /api/v1/injections/{task_id}/cancel:
    put:
      description: 取消指定的故障注入任务
      parameters:
      - description: 任务ID
        in: path
        name: task_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_InjectCancelResp'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 取消故障注入任务
      tags:
      - injection
  /api/v1/injections/analysis/no-issues:
    get:
      description: 根据时间范围查询所有没有问题的故障注入记录列表，返回包含配置信息的详细记录
      parameters:
      - description: 环境标签过滤
        in: query
        name: env
        type: string
      - description: 批次标签过滤
        in: query
        name: batch
        type: string
      - description: 时间范围查询，支持自定义相对时间(1h/24h/7d)或custom 默认不设置
        in: query
        name: lookback
        type: string
      - description: 自定义开始时间，RFC3339格式，当lookback=custom时必需
        format: date-time
        in: query
        name: custom_start_time
        type: string
      - description: 自定义结束时间，RFC3339格式，当lookback=custom时必需
        format: date-time
        in: query
        name: custom_end_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回没有问题的故障注入记录列表
          schema:
            $ref: '#/definitions/dto.GenericResponse-array_dto_FaultInjectionNoIssuesResp'
        "400":
          description: 请求参数错误，如时间格式不正确或参数验证失败等
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: 服务器内部错
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 查询没有问题的故障注入记录
      tags:
      - injection
  /api/v1/injections/analysis/statistics:
    get:
      description: 获取故障注入记录的统计信息，包括有问题、没有问题和总记录数量
      parameters:
      - description: 时间范围查询，支持自定义相对时间(1h/24h/7d)或custom 默认不设置
        in: query
        name: lookback
        type: string
      - description: 自定义开始时间，RFC3339格式，当lookback=custom时必需
        format: date-time
        in: query
        name: custom_start_time
        type: string
      - description: 自定义结束时间，RFC3339格式，当lookback=custom时必需
        format: date-time
        in: query
        name: custom_end_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回故障注入统计信息
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_FaultInjectionStatisticsResp'
        "400":
          description: 请求参数错误，如时间格式不正确或参数验证失败等
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取故障注入统计信息
      tags:
      - injection
  /api/v1/injections/analysis/with-issues:
    get:
      description: 根据时间范围查询所有有问题的故障注入记录列表
      parameters:
      - description: 环境标签过滤
        in: query
        name: env
        type: string
      - description: 批次标签过滤
        in: query
        name: batch
        type: string
      - description: 时间范围查询，支持自定义相对时间(1h/24h/7d)或custom 默认不设置
        in: query
        name: lookback
        type: string
      - description: 自定义开始时间，RFC3339格式，当lookback=custom时必需
        format: date-time
        in: query
        name: custom_start_time
        type: string
      - description: 自定义结束时间，RFC3339格式，当lookback=custom时必需
        format: date-time
        in: query
        name: custom_end_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-array_dto_FaultInjectionWithIssuesResp'
        "400":
          description: 请求参数错误，如时间格式不正确或参数验证失败等
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 查询有问题的故障注入记录
      tags:
      - injection
  /api/v1/injections/conf:
    get:
      description: 获取指定命名空间的故障注入配置信息，支持不同显示模式的配置树结构
      parameters:
      - description: 命名空间，指定要获取配置的命名空间
        in: query
        name: namespace
        required: true
        type: string
      - default: engine
        description: 显示模式
        enum:
        - display
        - engine
        in: query
        name: mode
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回配置树结构
          schema:
            $ref: '#/definitions/dto.GenericResponse-handler_Node'
        "400":
          description: 请求参数错误，如命名空间或模式参数缺失
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取故障注入配置
      tags:
      - injection
  /api/v1/injections/configs:
    get:
      description: 根据多个TraceID获取对应的故障注入配置信息，用于查看已提交的故障注入任务的配置详情
      parameters:
      - collectionFormat: multi
        description: TraceID列表，支持多个值，用于查询对应的配置信息
        in: query
        items:
          type: string
        name: trace_ids
        type: array
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回配置列表
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "400":
          description: 请求参数错误，如TraceID参数缺失或格式不正确
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取已注入故障配置列表
      tags:
      - injection
  /api/v1/injections/mapping:
    get:
      description: 获取状态和故障类型的字符串与数字映射关系，用于前端显示和API参数验证
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回字段映射关系
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_InjectionFieldMappingResp'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取字段映射关系
      tags:
      - injection
  /api/v1/injections/ns-resources:
    get:
      description: 获取所有命名空间及其对应的资源信息映射，或查询指定命名空间的资源信息。返回命名空间到资源的映射表，用于故障注入配置和资源管理
      parameters:
      - description: 命名空间名称，不指定时返回所有命名空间的资源映射
        in: query
        name: namespace
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 指定命名空间时返回该命名空间的资源信息
          schema:
            $ref: '#/definitions/dto.GenericResponse-handler_Resources'
        "404":
          description: 指定的命名空间不存在
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: 服务器内部错误，无法获取资源映射
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取命名空间资源映射
      tags:
      - injection
  /api/v1/injections/query:
    get:
      description: 根据名称或任务ID查询故障注入记录详情，两个参数至少提供一个
      parameters:
      - description: 故障注入名称
        in: query
        name: name
        type: string
      - description: 任务ID
        in: query
        name: task_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回故障注入记录详情
          schema:
            $ref: '#/definitions/dto.GenericResponse-database_FaultInjectionSchedule'
        "400":
          description: 请求参数错误，如参数缺失、格式不正确或验证失败等
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 查询单个故障注入记录
      tags:
      - injection
  /api/v1/tasks/{task_id}:
    get:
      description: 根据任务ID获取任务详细信息,包括任务基本信息和执行日志
      parameters:
      - description: 任务ID
        in: path
        name: task_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_TaskDetailResp'
        "400":
          description: 无效的任务ID
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取任务详情
      tags:
      - task
  /api/v1/tasks/list:
    get:
      description: 分页获取任务列表
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page_num
        type: integer
      - default: 10
        description: 每页大小
        in: query
        name: page_size
        type: integer
      - description: 排序字段
        in: query
        name: sort_field
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_PaginationResp-dto_TaskItem'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取任务列表
      tags:
      - task
  /api/v1/tasks/queue:
    get:
      description: 分页获取队列中等待执行的任务列表
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page_num
        type: integer
      - default: 10
        description: 每页大小
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_PaginationResp-dto_UnifiedTask'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取队列中的任务
      tags:
      - task
  /api/v1/traces/analyze:
    get:
      description: 使用多种筛选条件分析链路数据
      parameters:
      - description: 子任务类型筛选
        in: query
        name: first_task_type
        type: string
      - description: 相对时间查询，如 1h, 24h, 7d或者是custom
        in: query
        name: lookback
        type: string
      - description: 当lookback=custom时必需，自定义开始时间(RFC3339格式)
        in: query
        name: custom_start_time
        type: string
      - description: 当lookback=custom时必需，自定义结束时间(RFC3339格式)
        in: query
        name: custom_end_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 分析链路数据
      tags:
      - trace
  /api/v1/traces/completed:
    get:
      description: 根据指定的时间范围获取完成状态的链路
      parameters:
      - description: 相对时间查询，如 1h, 24h, 7d或者是custom
        in: query
        name: lookback
        type: string
      - description: 当lookback=custom时必需，自定义开始时间(RFC3339格式)
        in: query
        name: custom_start_time
        type: string
      - description: 当lookback=custom时必需，自定义结束时间(RFC3339格式)
        in: query
        name: custom_end_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_GetCompletedMapResp'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取完成状态的链路
      tags:
      - trace
produces:
- application/json
schemes:
- http
- https
swagger: "2.0"
