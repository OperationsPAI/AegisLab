basePath: /api/v1
definitions:
  consts.TaskType:
    enum:
    - ""
    - RestartService
    - RunAlgorithm
    - FaultInjection
    - BuildImages
    - BuildDataset
    - CollectResult
    type: string
    x-enum-varnames:
    - TaskTypeDummy
    - TaskTypeRestartService
    - TaskTypeRunAlgorithm
    - TaskTypeFaultInjection
    - TaskTypeBuildImages
    - TaskTypeBuildDataset
    - TaskTypeCollectResult
  dto.AlgorithmExecutionPayload:
    properties:
      algorithm:
        type: string
      dataset:
        type: string
      env_vars:
        type: object
    type: object
  dto.AlgorithmListResp:
    properties:
      algorithms:
        items:
          type: string
        type: array
    type: object
  dto.Conclusion:
    properties:
      level:
        description: 例如 service level
        type: string
      metric:
        description: 例如 topk
        type: string
      rate:
        type: number
    type: object
  dto.DatasetBuildPayload:
    properties:
      benchmark:
        type: string
      env_vars:
        type: object
      name:
        type: string
      pre_duration:
        type: integer
    type: object
  dto.DatasetDeleteResp:
    properties:
      failed_names:
        items:
          type: string
        type: array
      success_count:
        type: integer
    type: object
  dto.DatasetItem:
    properties:
      end_time:
        type: string
      name:
        type: string
      param:
        items:
          type: object
        type: array
      start_time:
        type: string
    type: object
  dto.DetectorRecord:
    properties:
      abnormal_avg_duration:
        example: 0.5
        type: number
      abnormal_p90:
        example: 1.2
        type: number
      abnormal_p95:
        example: 1.5
        type: number
      abnormal_p99:
        example: 2
        type: number
      abnormal_succ_rate:
        example: 0.8
        type: number
      issue:
        type: string
      normal_avg_duration:
        example: 0.3
        type: number
      normal_p90:
        example: 0.8
        type: number
      normal_p95:
        example: 1
        type: number
      normal_p99:
        example: 1.3
        type: number
      normal_succ_rate:
        example: 0.95
        type: number
      span_name:
        type: string
    type: object
  dto.EvaluationItem:
    properties:
      algorithm:
        type: string
      conclusions:
        items:
          $ref: '#/definitions/dto.Conclusion'
        type: array
      executions:
        items:
          $ref: '#/definitions/dto.Execution'
        type: array
    type: object
  dto.EvaluationListResp:
    properties:
      results:
        items:
          $ref: '#/definitions/dto.EvaluationItem'
        type: array
    type: object
  dto.Execution:
    properties:
      dataset:
        $ref: '#/definitions/dto.DatasetItem'
      granularity_records:
        items:
          $ref: '#/definitions/dto.GranularityRecord'
        type: array
    type: object
  dto.ExecutionRecord:
    properties:
      algorithm:
        type: string
      granularity_records:
        items:
          $ref: '#/definitions/dto.GranularityRecord'
        type: array
    type: object
  dto.FaultInjectionNoIssuesResp:
    properties:
      dataset_id:
        type: integer
      display_config:
        type: string
      engine_config:
        $ref: '#/definitions/handler.Node'
      injection_name:
        type: string
      pre_duration:
        type: integer
    type: object
  dto.FaultInjectionStatisticsResp:
    properties:
      no_issues_count:
        type: integer
      total_count:
        type: integer
      with_issues_count:
        type: integer
    type: object
  dto.FaultInjectionWithIssuesResp:
    properties:
      dataset_id:
        type: integer
      display_config:
        type: string
      engine_config:
        $ref: '#/definitions/handler.Node'
      injection_name:
        type: string
      issues:
        type: string
      pre_duration:
        type: integer
    type: object
  dto.GenericResponse-any:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-array_dto_FaultInjectionNoIssuesResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        description: 泛型类型的数据
        items:
          $ref: '#/definitions/dto.FaultInjectionNoIssuesResp'
        type: array
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-array_dto_FaultInjectionWithIssuesResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        description: 泛型类型的数据
        items:
          $ref: '#/definitions/dto.FaultInjectionWithIssuesResp'
        type: array
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_AlgorithmListResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.AlgorithmListResp'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_DatasetDeleteResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.DatasetDeleteResp'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_EvaluationListResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.EvaluationListResp'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_FaultInjectionStatisticsResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.FaultInjectionStatisticsResp'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_GetCompletedMapResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.GetCompletedMapResp'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_InjectCancelResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.InjectCancelResp'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_InjectionItem:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.InjectionItem'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_PaginationResp-dto_DatasetItem:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.PaginationResp-dto_DatasetItem'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_PaginationResp-dto_InjectionItem:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.PaginationResp-dto_InjectionItem'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_PaginationResp-dto_TaskItem:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.PaginationResp-dto_TaskItem'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_PaginationResp-dto_UnifiedTask:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.PaginationResp-dto_UnifiedTask'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_QueryDatasetResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.QueryDatasetResp'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_SubmitResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.SubmitResp'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-dto_TaskDetailResp:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/dto.TaskDetailResp'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GenericResponse-handler_Node:
    properties:
      code:
        description: 状态码
        type: integer
      data:
        allOf:
        - $ref: '#/definitions/handler.Node'
        description: 泛型类型的数据
      message:
        description: 响应消息
        type: string
      timestamp:
        description: 响应生成时间
        type: integer
    type: object
  dto.GetCompletedMapResp:
    properties:
      has_anomaly:
        description: 检测到异常的链路ID列表
        items:
          type: string
        type: array
      no_anomaly:
        description: 没有异常的链路ID列表
        items:
          type: string
        type: array
    type: object
  dto.GranularityRecord:
    properties:
      confidence:
        type: number
      level:
        type: string
      rank:
        type: integer
      result:
        type: string
    type: object
  dto.InjectCancelResp:
    type: object
  dto.InjectionItem:
    properties:
      end_time:
        type: string
      fault_type:
        type: string
      id:
        type: integer
      pre_duration:
        type: integer
      spec:
        type: object
      start_time:
        type: string
      status:
        type: string
      task_id:
        type: string
    type: object
  dto.InjectionSubmitReq:
    properties:
      benchmark:
        type: string
      interval:
        type: integer
      pre_duration:
        type: integer
      specs:
        items:
          $ref: '#/definitions/handler.Node'
        type: array
    type: object
  dto.PaginationResp-dto_DatasetItem:
    properties:
      items:
        items:
          $ref: '#/definitions/dto.DatasetItem'
        type: array
      total:
        type: integer
      total_pages:
        type: integer
    type: object
  dto.PaginationResp-dto_InjectionItem:
    properties:
      items:
        items:
          $ref: '#/definitions/dto.InjectionItem'
        type: array
      total:
        type: integer
      total_pages:
        type: integer
    type: object
  dto.PaginationResp-dto_TaskItem:
    properties:
      items:
        items:
          $ref: '#/definitions/dto.TaskItem'
        type: array
      total:
        type: integer
      total_pages:
        type: integer
    type: object
  dto.PaginationResp-dto_UnifiedTask:
    properties:
      items:
        items:
          $ref: '#/definitions/dto.UnifiedTask'
        type: array
      total:
        type: integer
      total_pages:
        type: integer
    type: object
  dto.QueryDatasetResp:
    properties:
      detector_result:
        $ref: '#/definitions/dto.DetectorRecord'
      end_time:
        type: string
      execution_results:
        items:
          $ref: '#/definitions/dto.ExecutionRecord'
        type: array
      name:
        type: string
      param:
        items:
          type: object
        type: array
      start_time:
        type: string
    type: object
  dto.RetryPolicy:
    properties:
      backoff_sec:
        description: Seconds to wait between retries
        type: integer
      max_attempts:
        description: Maximum number of retry attempts
        type: integer
    type: object
  dto.SubmitResp:
    properties:
      group_id:
        type: string
      traces:
        items:
          $ref: '#/definitions/dto.Trace'
        type: array
    type: object
  dto.TaskDetailResp:
    properties:
      logs:
        items:
          type: string
        type: array
      task:
        $ref: '#/definitions/dto.TaskItem'
    type: object
  dto.TaskItem:
    properties:
      created_at:
        type: string
      id:
        type: string
      payload:
        type: object
      status:
        type: string
      trace_id:
        type: string
      type:
        type: string
    type: object
  dto.Trace:
    properties:
      head_task_id:
        type: string
      index:
        type: integer
      trace_id:
        type: string
    type: object
  dto.UnifiedTask:
    properties:
      cron_expr:
        description: Cron expression for recurring tasks
        type: string
      execute_time:
        description: Unix timestamp for delayed execution
        type: integer
      group_carrier:
        allOf:
        - $ref: '#/definitions/propagation.MapCarrier'
        description: Carrier for group context
      group_id:
        description: ID for grouping tasks
        type: string
      immediate:
        description: Whether to execute immediately
        type: boolean
      payload:
        description: Task-specific data
        type: object
      restart_num:
        description: Number of restarts for the task
        type: integer
      retry_policy:
        allOf:
        - $ref: '#/definitions/dto.RetryPolicy'
        description: Policy for retrying failed tasks
      task_id:
        description: Unique identifier for the task
        type: string
      trace_carrier:
        allOf:
        - $ref: '#/definitions/propagation.MapCarrier'
        description: Carrier for trace context
      trace_id:
        description: ID for tracing related tasks
        type: string
      type:
        allOf:
        - $ref: '#/definitions/consts.TaskType'
        description: Task type (determines how it's processed)
    type: object
  handler.Node:
    properties:
      children:
        additionalProperties:
          $ref: '#/definitions/handler.Node'
        type: object
      description:
        type: string
      name:
        type: string
      range:
        items:
          type: integer
        type: array
      value:
        type: integer
    type: object
  propagation.MapCarrier:
    additionalProperties:
      type: string
    type: object
host: localhost:8080
info:
  contact:
    email: team@rcabench.com
    name: RCABench Team
  description: |-
    RCABench - A comprehensive root cause analysis benchmarking platform for microservices
    This API provides endpoints for managing datasets, algorithms, evaluations, and fault injections
    for root cause analysis in distributed systems and microservices architectures.
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  title: RCABench API
  version: 1.0.1
paths:
  /api/v1/algorithms:
    get:
      description: 获取算法列表
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_AlgorithmListResp'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取算法列表
      tags:
      - algorithm
    post:
      description: 执行算法
      parameters:
      - description: 请求体
        in: body
        name: body
        required: true
        schema:
          items:
            $ref: '#/definitions/dto.AlgorithmExecutionPayload'
          type: array
      produces:
      - application/json
      responses:
        "202":
          description: Accepted
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_SubmitResp'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 执行算法
      tags:
      - algorithm
  /api/v1/algorithms/build:
    post:
      consumes:
      - multipart/form-data
      description: 通过上传文件或指定算法名称来构建算法镜像
      parameters:
      - description: 算法文件 (zip/tar.gz)
        in: formData
        name: file
        type: file
      - description: 算法名称
        in: formData
        name: algo
        type: string
      produces:
      - application/json
      responses:
        "202":
          description: Accepted
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_SubmitResp'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 构建算法镜像
      tags:
      - algorithm
  /api/v1/datasets:
    delete:
      description: 删除数据集数据
      parameters:
      - collectionFormat: csv
        description: 数据集名称列表
        in: query
        items:
          type: string
        name: names
        required: true
        type: array
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_DatasetDeleteResp'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 删除数据集数据
      tags:
      - dataset
    get:
      description: 获取状态为成功的注入数据集列表（支持分页参数）
      parameters:
      - default: 1
        description: 页码（从1开始）
        in: query
        minimum: 1
        name: page_num
        required: true
        type: integer
      - default: 10
        description: 每页数量
        in: query
        maximum: 20
        minimum: 5
        name: page_size
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功响应
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_PaginationResp-dto_DatasetItem'
        "400":
          description: 参数校验失败
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 分页查询数据集列表
      tags:
      - dataset
    post:
      description: 批量构建数据集
      parameters:
      - description: 请求体
        in: body
        name: body
        required: true
        schema:
          items:
            $ref: '#/definitions/dto.DatasetBuildPayload'
          type: array
      produces:
      - application/json
      responses:
        "202":
          description: Accepted
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_SubmitResp'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 批量构建数据集
      tags:
      - dataset
  /api/v1/datasets/download:
    get:
      description: 将指定路径的多个数据集打包为 ZIP 文件下载（自动排除 result.csv 文件）
      parameters:
      - collectionFormat: csv
        description: 数据集组ID列表，与names参数二选一
        in: query
        items:
          type: string
        name: group_ids
        type: array
      - collectionFormat: csv
        description: 数据集名称列表，与group_ids参数二选一
        in: query
        items:
          type: string
        name: names
        type: array
      produces:
      - application/zip
      responses:
        "200":
          description: ZIP 文件流
          schema:
            type: string
        "400":
          description: 参数绑定错误
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "403":
          description: 非法路径访问
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: 文件打包失败
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 下载数据集打包文件
      tags:
      - dataset
  /api/v1/datasets/query:
    get:
      description: 根据数据集名称查询单个数据集的详细信息，包括检测器结果和执行记录
      parameters:
      - description: 数据集名称
        in: query
        name: name
        required: true
        type: string
      - description: 排序方式
        in: query
        name: sort
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_QueryDatasetResp'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 查询单个数据集详情
      tags:
      - dataset
  /api/v1/evaluations:
    get:
      description: 返回每种算法的执行历史记录
      parameters:
      - collectionFormat: csv
        description: 执行结果 ID 数组
        in: query
        items:
          type: integer
        name: execution_ids
        type: array
      - collectionFormat: csv
        description: 算法名称数组
        in: query
        items:
          type: string
        name: algorithms
        type: array
      - collectionFormat: csv
        description: 级别名称数组
        in: query
        items:
          type: string
        name: levels
        type: array
      - collectionFormat: csv
        description: 指标名称数组
        in: query
        items:
          type: string
        name: metrics
        type: array
      produces:
      - application/json
      responses:
        "200":
          description: 成功响应
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_EvaluationListResp'
        "400":
          description: 参数校验失败
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取每种算法的执行历史记录
      tags:
      - evaluation
  /api/v1/injections:
    get:
      description: 获取注入记录列表（支持分页参数）
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page_num
        type: integer
      - default: 10
        description: 每页大小
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_PaginationResp-dto_InjectionItem'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 分页查询注入记录列表
      tags:
      - injection
    post:
      description: 注入故障
      parameters:
      - description: 请求体
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.InjectionSubmitReq'
      produces:
      - application/json
      responses:
        "202":
          description: Accepted
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_SubmitResp'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 注入故障
      tags:
      - injection
  /api/v1/injections/{task_id}/cancel:
    put:
      description: 取消指定的故障注入任务
      parameters:
      - description: 任务ID
        in: path
        name: task_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_InjectCancelResp'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 取消故障注入任务
      tags:
      - injection
  /api/v1/injections/analysis/dataset/{dataset_id}:
    get:
      description: 根据数据集ID查询故障注入记录详情（包括是否有问题）
      parameters:
      - description: 数据集ID
        in: path
        name: dataset_id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 根据数据集ID查询故障注入记录
      tags:
      - injection
  /api/v1/injections/analysis/no-issues:
    get:
      description: 查询所有没有问题的故障注入记录列表
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-array_dto_FaultInjectionNoIssuesResp'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 查询没有问题的故障注入记录
      tags:
      - injection
  /api/v1/injections/analysis/statistics:
    get:
      description: 获取故障注入记录的统计信息，包括有问题和没有问题的记录数量
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_FaultInjectionStatisticsResp'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取故障注入统计信息
      tags:
      - injection
  /api/v1/injections/analysis/with-issues:
    get:
      description: 查询所有有问题的故障注入记录列表
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-array_dto_FaultInjectionWithIssuesResp'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 查询有问题的故障注入记录
      tags:
      - injection
  /api/v1/injections/conf:
    get:
      description: 获取指定命名空间的故障注入配置信息
      parameters:
      - description: 命名空间
        in: query
        name: namespace
        required: true
        type: string
      - description: 显示模式(display/engine)
        in: query
        name: mode
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-handler_Node'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取故障注入配置
      tags:
      - injection
  /api/v1/injections/configs:
    get:
      description: 根据多个 TraceID 获取对应的故障注入配置信息
      parameters:
      - collectionFormat: csv
        description: Trace ID 列表
        in: query
        items:
          type: string
        name: trace_ids
        required: true
        type: array
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取故障注入配置列表
      tags:
      - injection
  /api/v1/injections/ns/status:
    get:
      description: 获取命名空间锁状态信息
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取命名空间锁状态
      tags:
      - injection
  /api/v1/injections/query:
    get:
      description: 根据名称或任务ID查询故障注入记录详情
      parameters:
      - description: 注入名称
        in: query
        name: name
        type: string
      - description: 任务ID
        in: query
        name: task_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_InjectionItem'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 查询故障注入记录
      tags:
      - injection
  /api/v1/tasks/{task_id}:
    get:
      description: 根据任务ID获取任务详细信息,包括任务基本信息和执行日志
      parameters:
      - description: 任务ID
        in: path
        name: task_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_TaskDetailResp'
        "400":
          description: 无效的任务ID
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "404":
          description: 任务不存在
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: 服务器内部错误
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取任务详情
      tags:
      - task
  /api/v1/tasks/list:
    get:
      description: 分页获取任务列表
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page_num
        type: integer
      - default: 10
        description: 每页大小
        in: query
        name: page_size
        type: integer
      - description: 排序字段
        in: query
        name: sort_field
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_PaginationResp-dto_TaskItem'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取任务列表
      tags:
      - task
  /api/v1/tasks/queue:
    get:
      description: 分页获取队列中等待执行的任务列表
      parameters:
      - default: 1
        description: 页码
        in: query
        name: page_num
        type: integer
      - default: 10
        description: 每页大小
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_PaginationResp-dto_UnifiedTask'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取队列中的任务
      tags:
      - task
  /api/v1/traces/analyze:
    get:
      description: 使用多种筛选条件分析链路数据
      parameters:
      - description: 子任务类型筛选
        in: query
        name: first_task_type
        type: string
      - description: 时间回溯范围(5m,15m,30m,1h,2h,3h,6h,12h,1d,2d,custom)
        in: query
        name: lookback
        type: string
      - description: 当lookback=custom时必需，自定义开始时间(RFC3339格式)
        in: query
        name: custom_start_time
        type: string
      - description: 当lookback=custom时必需，自定义结束时间(RFC3339格式)
        in: query
        name: custom_end_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 分析链路数据
      tags:
      - trace
  /api/v1/traces/completed:
    get:
      description: 根据指定的时间范围获取完成状态的链路
      parameters:
      - description: 时间回溯范围(5m,15m,30m,1h,2h,3h,6h,12h,1d,2d,custom)
        in: query
        name: lookback
        type: string
      - description: 当lookback=custom时必需，自定义开始时间(RFC3339格式)
        in: query
        name: custom_start_time
        type: string
      - description: 当lookback=custom时必需，自定义结束时间(RFC3339格式)
        in: query
        name: custom_end_time
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.GenericResponse-dto_GetCompletedMapResp'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/dto.GenericResponse-any'
      summary: 获取完成状态的链路
      tags:
      - trace
produces:
- application/json
schemes:
- http
- https
swagger: "2.0"
